<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì˜¤ëŠ˜ í•  ì¼ - ë©”ì¸</title>

  <!-- Google Fonts (ë‘¥ê¸€ê³  ë˜ë ·í•œ ì œëª©/ë³¸ë¬¸) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #f7fafc;
      --accent-1: #fef3c7;    /* ì—°ë…¸ë‘ */
      --accent-2: #d1fae5;    /* ì—°ë¯¼íŠ¸ */
      --card: #fffaf0;        /* ë”°ëœ»í•œ ì•„ì´ë³´ë¦¬ í†¤ ì¹´ë“œ */
      --line: #e5e7eb;
      --text: #27303f;
      --muted: #64748b;
      --brand: #2e7d57;       /* ì´ˆë¡ ë²„íŠ¼ */
      --brand-shadow: rgba(46,125,87,.25);
      --err: #e11d48;
    }

    *{ box-sizing: border-box; }
    html, body{ height:100%; }
    body{
      margin:0;
      font-family: "Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo", sans-serif;
      color: var(--text);
      background:
        radial-gradient(900px 360px at 12% -10%, var(--accent-1), transparent 60%),
        radial-gradient(800px 320px at 105% 5%, var(--accent-2), transparent 55%),
        linear-gradient(180deg, var(--bg), var(--bg));
      display:grid;
      place-items:center;
      padding: 24px 16px;
    }

    /* êµ¬ë¦„ ë°°ê²½ (CSSë§Œìœ¼ë¡œ) */
    .clouds{
      position: fixed; inset: 0; pointer-events: none; z-index: -1;
      background:
        radial-gradient(140px 60px at 12% 22%, #fff 60%, transparent 61%),
        radial-gradient(120px 50px at 20% 18%, #fff 60%, transparent 61%),
        radial-gradient(160px 70px at 85% 20%, #fff 60%, transparent 61%),
        radial-gradient(120px 55px at 80% 30%, #fff 60%, transparent 61%),
        linear-gradient(transparent, transparent);
      opacity:.75;
      filter: blur(0.2px);
    }

    .wrap{ width:100%; max-width: 480px; }

    /* ìš°ìƒë‹¨ êµì‚¬ìš© */
    #teacher-link{
      position: fixed; top: 14px; right: 14px;
      padding: 8px 12px;
      font-size: 12px; color: var(--text);
      background: #ffffffd9; border: 1px solid var(--line);
      border-radius: 999px; cursor: pointer;
      box-shadow: 0 6px 16px rgba(0,0,0,.06);
      user-select: none;
      transition: transform .08s ease, box-shadow .2s ease, border-color .2s ease;
    }
    #teacher-link:hover{ transform: translateY(-1px); border-color:#d1d5db; }

    header{ text-align:center; margin-bottom: 14px; }

    /* ë¡œê³  ë°•ìŠ¤ (ì±… ì•„ì´ì½˜ ëŠë‚Œ) */
    .logo-box{
      display:inline-flex; align-items:center; justify-content:center;
      width: 88px; height: 88px; border-radius: 24px;
      background: #ffffffcc; border: 1px solid #fff;
      box-shadow: 0 8px 28px rgba(0,0,0,.06);
      backdrop-filter: blur(6px);
      cursor: pointer;
      transition: transform .12s ease, box-shadow .2s ease;
    }
    .logo-box:hover{ transform: translateY(-2px); box-shadow: 0 12px 36px rgba(0,0,0,.08); }

    .title{
      margin: 12px 0 0;
      font-family: "Jua", "Noto Sans KR", sans-serif;
      font-weight: 700; font-size: 28px; letter-spacing: -.2px;
      display: inline-flex; align-items: center; gap: 6px;
    }
    .subtitle{ margin-top: 6px; color: var(--muted); font-size: 13px; }

    /* ê°•ì¡° ë°°ì§€ */
    .chip{
      display:inline-flex; align-items:center; gap:6px;
      font-size:12px; color:#065f46;
      background:#d1fae5; border:1px solid #a7f3d0;
      border-radius:999px; padding:4px 10px; margin-top:10px;
      user-select:none;
    }

    /* ì¹´ë“œ */
    .card{
      background: var(--card);
      border: 1px solid #f2e8cf;
      border-radius: 22px;
      padding: 22px;
      box-shadow:
        0 10px 0 #e6dcc3 inset,
        0 16px 36px rgba(0,0,0,.06);
      transition: border-color .2s ease, box-shadow .2s ease;
    }
    .card:focus-within{
      border-color:#e8dfc8;
      box-shadow:
        0 10px 0 #e6dcc3 inset,
        0 18px 42px rgba(16,185,129,.12);
    }

    label{
      display:block; font-size: 13px; color: var(--muted);
      margin: 10px 2px 8px;
    }
    .field{ margin-bottom: 14px; position: relative; }

    select, input[type="password"], input[type="text"]{
      width: 100%; font-size: 16px; color: var(--text);
      background: #ffffff;
      border: 2px solid #e5e7eb;
      border-radius: 14px;
      padding: 12px 14px;
      outline: none;
      box-shadow: 0 2px 0 rgba(0,0,0,.02) inset;
      transition: border-color .12s ease, box-shadow .12s ease, background .12s ease;
    }
    select:hover, input:hover{ border-color:#d1d5db; }
    select:focus, input:focus{
      border-color: #10b981;
      box-shadow: 0 0 0 4px rgba(16,185,129,.2);
      background: #fcfffd;
    }

    /* ë¹„ë°€ë²ˆí˜¸ ë³´ê¸° ë²„íŠ¼ */
    .pw-toggle{
      position:absolute; right: 10px; top: 50%; transform: translateY(-50%);
      background:#f8fafc; border:1px solid #e5e7eb; color:#475569;
      padding: 6px 8px; border-radius: 10px; cursor: pointer;
    }
    .pw-toggle:hover{ background:#eef2f7; }

    /* ì—ëŸ¬ & íŒíŠ¸ */
    #error-msg{ min-height:18px; text-align:center; font-size:13px; color: var(--err); margin: 6px 0 2px; }
    .hint{ text-align:center; font-size:12px; color: var(--muted); margin-top: 6px; }

    /* ë¡œê·¸ì¸ ë²„íŠ¼ */
    .btn{
      width:100%;
      border:0; border-radius:16px;
      padding: 14px 14px;
      font-size:18px; font-weight:800; color:#fff;
      background: var(--brand);
      box-shadow: 0 10px 28px var(--brand-shadow);
      cursor:pointer;
      transition: transform .06s ease, box-shadow .2s ease, filter .12s ease;
    }
    .btn:hover{ filter: brightness(1.02); box-shadow: 0 14px 34px var(--brand-shadow); }
    .btn:active{ transform: translateY(1px); }

    .footer{ margin-top: 14px; text-align:center; font-size: 11px; color: var(--muted); }

    /* ì‘ì€ ì¢…ì´ ëŠë‚Œì„ ì£¼ëŠ” ë‘¥ê·¼ ëª¨ì„œë¦¬ ì»¨í…Œì´ë„ˆ ê°€ì¥ìë¦¬ */
    .page-round{
      position: fixed; left: 50%; transform: translateX(-50%);
      bottom: 24px; width: min(95%, 820px); height: 22px;
      background: #f4ecd6; border-radius: 12px;
      filter: blur(6px); opacity:.2; z-index:-1;
    }
  </style>
</head>
<body>
  <div class="clouds" aria-hidden="true"></div>
  <div class="page-round" aria-hidden="true"></div>

  <div id="teacher-link" onclick="location.href='teacher.html';" title="êµì‚¬ìš© í™”ë©´ ë°”ë¡œê°€ê¸°">êµì‚¬ìš©</div>

  <div class="wrap">
    <header onclick="location.href='index.html';" style="cursor:pointer;">
      <div class="logo-box" aria-hidden="true">
        <!-- ì±… ì•„ì´ì½˜ (ì¸ë¼ì¸ SVG) -->
        <svg width="56" height="56" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M6 5h10a2 2 0 0 1 2 2v10H8a2 2 0 0 0-2 2V5Z" fill="#ffd166" stroke="#3b3b3b" stroke-width="1.2"/>
          <path d="M6 9h10a2 2 0 0 1 2 2v6H8a2 2 0 0 0-2 2V9Z" fill="#9bd1ff" stroke="#3b3b3b" stroke-width="1.2" transform="translate(0 1.2)"/>
          <path d="M6 13h10a2 2 0 0 1 2 2v2H8a2 2 0 0 0-2 2v-6Z" fill="#ff9aa2" stroke="#3b3b3b" stroke-width="1.2" transform="translate(0 2.2)"/>
        </svg>
      </div>
      <h1 class="title">í•™ìƒ ë¡œê·¸ì¸ <span aria-hidden="true">ğŸ™‚</span></h1>
      <p class="subtitle">ë²ˆí˜¸ì™€ ì´ë¦„ì„ í™•ì¸í•˜ê³  ë¹„ë°€ë²ˆí˜¸ 4ìë¦¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”.</p>
      <span class="chip">ì‰¬ì›Œì§„ ë¡œê·¸ì¸ Â· ë˜ë ·í•œ ê°€ë…ì„±</span>
    </header>

    <main class="card" id="login-card">
      <form id="login-form" novalidate>
        <div class="field">
          <label for="student-select-login">í•™ìƒ ì„ íƒ</label>
          <select id="student-select-login" required>
            <option value="">-- ì„ íƒí•˜ì„¸ìš” --</option>
          </select>
        </div>

        <div class="field">
          <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
          <input
            type="password"
            id="password"
            inputmode="numeric"
            pattern="\\d{4}"
            placeholder="ë¹„ë°€ë²ˆí˜¸ 4ìë¦¬"
            maxlength="4"
            autocomplete="current-password"
            aria-describedby="pw-hint"
          />
          <button type="button" class="pw-toggle" id="togglePw" aria-label="ë¹„ë°€ë²ˆí˜¸ í‘œì‹œ ì „í™˜">ë³´ê¸°</button>
        </div>

        <div id="error-msg" role="status" aria-live="polite"></div>
        <button id="login-btn" type="submit" class="btn">ë¡œê·¸ì¸</button>
        <div class="hint" id="pw-hint">Enterí‚¤ë¡œë„ ë¡œê·¸ì¸í•  ìˆ˜ ìˆì–´ìš”.</div>
      </form>
    </main>

    <div class="footer">Â© ì˜¤ëŠ˜ í•  ì¼ onhi</div>
  </div>

  <script>
    // ---------- í•™ìƒ ëª©ë¡ ë¡œë“œ ----------
    function loadStudents() {
      const raw = localStorage.getItem("students");
      const students = raw ? JSON.parse(raw) : [];
      students.sort((a, b) => Number(a.id) - Number(b.id));

      const select = document.getElementById("student-select-login");
      select.innerHTML = '<option value="">-- ì„ íƒí•˜ì„¸ìš” --</option>';

      students.forEach(stu => {
        const num = Number(stu.id);
        const option = document.createElement("option");
        option.value = stu.name;
        option.textContent = `${num} ${stu.name}`;
        select.appendChild(option);
      });
    }

    // ---------- UX ----------
    const pw = document.getElementById("password");
    const toggle = document.getElementById("togglePw");

    toggle.addEventListener("click", () => {
      const isHidden = pw.type === "password";
      pw.type = isHidden ? "text" : "password";
      toggle.textContent = isHidden ? "ìˆ¨ê¸°ê¸°" : "ë³´ê¸°";
      pw.focus();
    });

    // ìˆ«ìë§Œ(4ìë¦¬)
    pw.addEventListener("input", (e) => {
      e.target.value = e.target.value.replace(/[^0-9]/g, "").slice(0, 4);
    });

    function showError(text){
      document.getElementById("error-msg").textContent = text || "";
    }
    function setBusy(b){
      const btn = document.getElementById("login-btn");
      btn.disabled = b;
      btn.textContent = b ? "í™•ì¸ ì¤‘â€¦" : "ë¡œê·¸ì¸";
    }

    // ---------- ë¡œê·¸ì¸ ----------
    function login(){
      const selectedName = document.getElementById("student-select-login").value;
      const inputPassword = pw.value.trim();

      if (!selectedName) { showError("í•™ìƒì„ ì„ íƒí•˜ì„¸ìš”."); return; }
      if (inputPassword.length !== 4) { showError("ë¹„ë°€ë²ˆí˜¸ 4ìë¦¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”."); return; }

      const raw = localStorage.getItem("students");
      const students = raw ? JSON.parse(raw) : [];
      const found = students.find(s => s.name === selectedName && s.password === inputPassword);

      if (found) {
        showError("");
        setBusy(true);
        localStorage.setItem("currentStudent", found.name);
        setTimeout(() => { location.href = "student.html"; }, 150);
      } else {
        showError("í•™ë²ˆ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
      }
    }

    document.getElementById("login-form").addEventListener("submit", (e) => {
      e.preventDefault();
      login();
    });

    window.addEventListener("load", () => {
      loadStudents();
      const last = localStorage.getItem("lastStudentSelection");
      if (last) {
        const sel = document.getElementById("student-select-login");
        if ([...sel.options].some(o => o.value === last)) sel.value = last;
      }
    });

    document.getElementById("student-select-login").addEventListener("change", (e)=>{
      localStorage.setItem("lastStudentSelection", e.target.value || "");
    });
  </script>
</body>
</html>

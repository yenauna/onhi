<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ì˜¤ëŠ˜ í•  ì¼ - ì „ì²´í™•ì¸</title>

  <link href="https://fonts.googleapis.com/css2?family=Jua&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/sunn-us/SUIT/fonts/variable/woff2/SUIT.css" />

  <link rel="stylesheet" href="css/common.css">
  <script src="js/common.js" defer></script>
  <script src="js/challenges.js" defer></script>

  <style>
    *{ box-sizing:border-box }
    html, body { height:100% }

    body{
      margin:0;
      font-family:'SUIT',system-ui,-apple-system,'Apple SD Gothic Neo','Noto Sans KR',sans-serif;
      color:var(--text);
      background:
        radial-gradient(820px 340px at 108% 0%, var(--bg-mint), transparent 62%),
        linear-gradient(180deg, var(--bg-base), var(--bg-base));
      padding-left:16px;
      padding-right:16px;
      padding-bottom:24px;
    }

    .container{
      width:calc(100% - 40px); margin:0 auto;
      background:var(--card); border:1px solid var(--card-line);
      border-radius:26px; box-shadow:0 16px 40px rgba(0,0,0,.10);
      padding:20px;
    }

    h1{
      margin:0; font-family:'Jua',sans-serif; font-weight:400; letter-spacing:-.2px;
      font-size:28px;
    }

    /* í•™ìƒ ì¹´ë“œ ê·¸ë¦¬ë“œ */
    .grid{
      display:grid;
      grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
      gap:10px;
    }
    .card{
      background:#fff; border:1px solid #e6e8eb; border-radius:16px;
      padding:12px; box-shadow:0 4px 10px rgba(0,0,0,.04);
    }
    .card .title{ font-weight:600; margin-bottom:8px; }

    .chip{
      border:1px solid #e6e8eb; border-radius:12px; padding:8px;
      display:flex; justify-content:space-between; align-items:center;
      margin:6px 0; user-select:none;
    }
    .card.selected { outline: 3px solid #2e7d57; outline-offset: 2px; }
    
    /* ìƒíƒœìƒ‰: ì˜¤ëŠ˜ ë¯¸ì™„ë£Œ(ì—°í•œ), ì§€ë‚œ ë¯¸ì™„ë£Œ(ê°•ì¡°) */
    .chip.missed-today { background:#f6c1c1; }
    .chip.missed-past  { background:#c0392b; color:#fff; border-color:#b23326; }
    .chip.done { display:none; } /* ì™„ë£ŒëŠ” ì•„ì˜ˆ ìˆ¨ê¹€(ì˜¤ëŠ˜ ì™„ë£Œë„ ìˆ¨ê¹€) */

    .date { font-size:10px; opacity:.9; }
   
    /* ëª¨ë“œê°€ ì¼œì§€ë©´ ì¹´ë“œê°€ ì„ íƒ ê°€ëŠ¥í•œ ëŠë‚Œ */
    body.login-pick-mode .grid .card{
      cursor: pointer;
      box-shadow: 0 0 0 3px rgba(46,125,87,.18) inset;
    }
    
    /* ì‹¤ì œë¡œ ì„ íƒëœ ì¹´ë“œ */
    .grid .card.selected{
      outline: 3px solid #2e7d57; outline-offset: 2px;
    }

    
  </style>
</head>
<body>
  <header class="topbar">
    <div class="logo" onclick="location.href='index.html'" style="cursor:pointer">
      <img src="logo.png" alt="ì˜¤ëŠ˜ í•  ì¼ ë¡œê³ " />
    </div>
    <nav class="menu" aria-label="ì£¼ìš” ë©”ë‰´">
      <button class="active" type="button">ì „ì²´í™•ì¸</button>
      <button type="button" id="btn-student-login">í•™ìƒ</button>
      <button type="button" onclick="location.href='teacher.html'">ì„ ìƒë‹˜</button>
    </nav>
    <div class="right-tools">
      <button type="button" id="eventsBtn" class="mode-btn" aria-pressed="false"></button>
      <button type="button" id="modeBtn" class="mode-btn" aria-pressed="false" disabled></button>
    </div>
  </header>

  <main class="container">
    <div id="events-strip" class="event-grid"></div>
    <div class="grid" id="board"></div>
  </main>

  <script>
    
    // ==== common.js í´ë°±(ì—†ì„ ë•Œë§Œ ì •ì˜) ====
    (function(){ 
      if (typeof getJSON !== 'function') {
        window.getJSON = function(k, fb=null){ try{ const v=localStorage.getItem(k); return v?JSON.parse(v):fb; }catch{ return fb; } };
      }
      if (typeof setJSON !== 'function') {
        window.setJSON = function(k, v){ localStorage.setItem(k, JSON.stringify(v)); };
      }
      if (typeof escapeHTML !== 'function') {
        window.escapeHTML = function(s){ return String(s)
          .replace(/&/g,'&amp;').replace(/</g,'&lt;')
          .replace(/>/g,'&gt;').replace(/"/g,'&quot;').replace(/'/g,'&#39;'); };
      }
      if (typeof normalizeDate !== 'function') {
        window.normalizeDate = function(d){
          const t = new Date(d); // 'YYYY-MM-DD' ë¬¸ìì—´ë„ OK
          t.setHours(0,0,0,0);
          return t;
        };
      }
      if (typeof loadAllTeacherTasks !== 'function') {
        window.loadAllTeacherTasks = function(){
          const res = [];
          for (let i=0; i<localStorage.length; i++){
            const key = localStorage.key(i);
            if (!key.startsWith('teacherTasks-')) continue;
            try{
              const data = JSON.parse(localStorage.getItem(key));
              res.push({ key, dateKey: key.slice('teacherTasks-'.length), data });
            }catch{}
          }
          return res;
        };
      }
    })();

    // ë¡œê·¸ì¸ ì„ íƒ ëª¨ë“œ ìƒíƒœ
    let loginPickMode = false;

    
    // =============== ê³µí†µ ìŠ¤í† ë¦¬ì§€ í—¬í¼ ===============
    // === ì™„ë£Œí‘œì‹œ ì €ì¥ì†Œ ê³µí†µ ===
function getDoneStore(name){ return getJSON("doneTasks-" + name, {}) || {}; }
function setDoneStore(name, obj){ setJSON("doneTasks-" + name, obj || {}); }

// === âœ… ì‹ ê·œ: UID ê¸°ë°˜ ===
function isDoneUID(name, uid){
  const store = getDoneStore(name);
  const v = store[uid];
  if (v === true) return true; // legacy true
  if (v && typeof v === 'object') {
    return v.s === 'd' || v.s === 'e';
  }
  return false;
}
function setDoneUID(name, uid, done){
  if (typeof setStatusFor === 'function') {
    setStatusFor(name, uid, { s: done ? 'd' : '', du: null });
    return;
  }
  const s = getDoneStore(name);
  if (done) s[uid] = true; else delete s[uid];
  setDoneStore(name, s);
}

// === (ì˜µì…˜) ë ˆê±°ì‹œ í˜¸í™˜: date@@text í‚¤ ===
function makeDoneKey(dateStr, taskText){ return `${dateStr}@@${taskText}`; }
function isDoneLegacy(name, dateStr, taskText){
  const s = getDoneStore(name);
  const k = makeDoneKey(dateStr, taskText);
  const v = s[k] ?? s[taskText];
  if (v === true) return true;
  if (v && typeof v === 'object') {
    return v.s === 'd' || v.s === 'e';
  }
  return false;
}
function setDoneLegacy(name, dateStr, taskText, done){
  const s = getDoneStore(name);
  const k = makeDoneKey(dateStr, taskText);
  if (done) s[k] = true; else delete s[k];
  setDoneStore(name, s);
}

// === ì•ˆì „í•œ í˜¸í™˜ ë˜í¼ (ì˜ˆì „ ì½”ë“œê°€ isDone/setDoneì„ ë¶ˆëŸ¬ë„ ë™ì‘) ===
// isDone(name, uid)  -> UID ëª¨ë“œ
// isDone(name, date, text) -> ë ˆê±°ì‹œ ëª¨ë“œ
function isDone(name, a, b){
  return (b === undefined) ? isDoneUID(name, a) : isDoneLegacy(name, a, b);
}
// setDone(name, uid, done)  -> UID ëª¨ë“œ
// setDone(name, date, text, done) -> ë ˆê±°ì‹œ ëª¨ë“œ
function setDone(name, a, b, d){
  if (typeof d === 'boolean') return setDoneLegacy(name, a, b, d);
  return setDoneUID(name, a, b);
}


    // ===== ìƒˆ êµ¬ì¡°(tasksV2) ë¡œë” (+ êµ¬ë²„ì „ teacherTasks-* ë°±ì—… í˜¸í™˜) =====
function getTasks(){ return getJSON('tasksV2', []) || []; }
function setTasks(arr){ setJSON('tasksV2', arr || []); }

// (ì„ íƒ) êµ¬ë²„ì „ â†’ ìƒˆ êµ¬ì¡° 1íšŒ ë§ˆì´ê·¸ë ˆì´ì…˜ (ì´ë¯¸ ì´ì „í–ˆìœ¼ë©´ ê·¸ëƒ¥ í†µê³¼)
(function migrateOnce(){
  if ((getTasks()||[]).length) return; // ì´ë¯¸ ìƒˆ êµ¬ì¡° ìˆìŒ
  const old = (window.loadAllTeacherTasks ? loadAllTeacherTasks() : []).map(({data,dateKey})=>{
    const repeat = data?.repeat || 'none';
    const students = data?.students || ['ì „ì²´'];
    const tasks = data?.tasks || [];
    return tasks.map(t=>({
      id: (Date.now()+Math.random()+""),
      type: 'assignment',
      date: dateKey,
      text: t,
      desc: '',
      repeat,
      repeatStart: repeat==='none'? null : dateKey,
      repeatEnd: null,
      students
    }));
  }).flat();
  if (old.length) setTasks(old);
})();


    // =============== ê³¼ì œ ë¡œë“œ ===============
    // === ê³¼ì œ ì¸ìŠ¤í„´ìŠ¤(ì˜¤ëŠ˜ê¹Œì§€) ìƒì„±: tasksV2 ê¸°ë°˜ ===
function buildInstancesFromTasks(){
  const tasks = getTasks(); // [{id,type,date,text,repeat,repeatStart,repeatEnd,students}]
  const today = normalizeDate(new Date());
  const dayMap = { mon:1, tue:2, wed:3, thu:4, fri:5 };
  const out = [];

  const push = (t, dObj) => {
    const y=dObj.getFullYear(), m=dObj.getMonth()+1, dd=dObj.getDate();
    out.push({
      uid: t.id,
      text: t.text,
      date: `${y}-${String(m).padStart(2,'0')}-${String(dd).padStart(2,'0')}`,
      dateObj: new Date(dObj),
      students: t.students || ['ì „ì²´']
    });
  };

  tasks.forEach(t=>{
    if (t.type === 'event') return; // ì¼ì •ì€ ì™„ë£Œ/ë¯¸ì™„ë£Œ ê°œë… ì—†ìŒ â†’ ë©”ì¸ ë³´ë“œ ì œì™¸
    if (t.type === 'challenge') return; // ë„ì „ë„ ë‚ ì§œ ì¸ìŠ¤í„´ìŠ¤ ì•„ë‹˜ â†’ ë³´ë“œ ì œì™¸(ì›í•˜ë©´ ê·œì¹™ ì •í•´ ë³„ë„ ì²˜ë¦¬)

    const base = normalizeDate(t.repeatStart || t.date);
    const end  = t.repeatEnd ? normalizeDate(t.repeatEnd) : today; // ë ì—†ìœ¼ë©´ ì˜¤ëŠ˜ê¹Œì§€ë§Œ
    const rpt  = t.repeat || 'none';

    if (rpt === 'daily'){
      for (let cur=new Date(base); cur<=today && cur<=end; cur.setDate(cur.getDate()+1)){
        push(t, cur);
      }
    } else if (dayMap[rpt] != null){
      const targetDow = dayMap[rpt];
      // base ì´í›„ ì²« íƒ€ê¹ƒ ìš”ì¼ê¹Œì§€ ì´ë™
      const cur = new Date(base);
      while (cur.getDay() !== targetDow) cur.setDate(cur.getDate()+1);
      for (; cur<=today && cur<=end; cur.setDate(cur.getDate()+7)){
        push(t, cur);
      }
    } else {
      // ë°˜ë³µ ì—†ìŒ: ê¸°ì¤€ ë‚ ì§œ 1ê±´(ì˜¤ëŠ˜ ì´ì „/ê°™ì€ ê²½ìš°ë§Œ)
      if (!isNaN(base) && base <= today) push(t, base);
    }
  });

  // ìµœì‹ ìˆœ ì •ë ¬
  out.sort((a,b)=> b.dateObj - a.dateObj);
  return out;
}

    function renderChallengeSuccesses(stripId){
    const strip = document.getElementById(stripId);
    if(!strip) return;
    Array.from(strip.querySelectorAll('.challenge-success')).forEach(el=>el.remove());
    const now = Date.now();
      const challenges =
      (window.Challenges && typeof window.Challenges.getChallenges === 'function')
        ? window.Challenges.getChallenges()
        : [];
    const byId = {};
    challenges.forEach(ch => byId[ch.id] = ch);
    const students = loadStudents();
    students.forEach(stu=>{
      const map = getJSON('challengeStatus-'+stu.name, {}) || {};
      Object.keys(map).forEach(id=>{
        const st = map[id];
        if(st && st.s==='d' && st.ts){
          const ts = new Date(st.ts).getTime();
          if(now - ts < 86400000){
            const ch = byId[id];
            const div = document.createElement('div');
            div.className = 'challenge-success';
            div.textContent = ch
              ? `${stu.name} ${ch.title} ë„ì „ì— ì„±ê³µ!`
              : `${stu.name} ë„ì „ì— ì„±ê³µ!`;
            strip.appendChild(div);
          }
        }
      });
      const prog = getJSON('challengeProgress-' + stu.name, {}) || {};
      Object.keys(prog).forEach(id=>{
        const info = prog[id];
        const ch = byId[id];
        const steps = Array.isArray(ch?.steps) ? ch.steps.length : 0;
        if(steps > 0 && info && info.ts && (info.step || 0) >= steps){
          const ts = new Date(info.ts).getTime();
          if(now - ts < 86400000){
            const div = document.createElement('div');
            div.className = 'challenge-success';
            div.textContent = ch
              ? `${stu.name} ${ch.title} ë„ì „ì— ì„±ê³µ!`
              : `${stu.name} ë„ì „ì— ì„±ê³µ!`;
            strip.appendChild(div);
          }
        }
      });
    });
  }
    
    // =============== ë³´ë“œ ë Œë” ===============
    function renderBoard(){
      const board = document.getElementById('board');
      board.innerHTML = '';
      renderEventsStrip('events-strip'); // ì˜¤ëŠ˜ ì¼ì • ë¨¼ì €
      renderChallengeSuccesses('events-strip');

      const mode = localStorage.getItem('boardMode') === 'edit' ? 'edit' : 'view';

      const students = sortStudents(loadStudents());
      const instances = buildInstancesFromTasks();

      // ì˜¤ëŠ˜ê³¼ ê³¼ê±°ë§Œ(ë¯¸ë˜ ì œì™¸)
      const today = normalizeDate(new Date());

      students.forEach(stu=>{
        const card = document.createElement('div');
        card.className='card';

        // ì¹´ë“œ í´ë¦­í•˜ë©´ ë¡œê·¸ì¸ íŒ¨ë„ ì—´ë¦¬ë„ë¡ ì—°ê²°
        card.dataset.student = stu.name;          // ì„ íƒëœ í•™ìƒ ì „ë‹¬ìš©
        card.addEventListener('click', () => {
          if (!loginPickMode) return;
          document.querySelectorAll('.grid .card.selected')
            .forEach(el => el.classList.remove('selected'));
          card.classList.add('selected');
          openLoginPanel(stu.name);
        });
        
        const title = document.createElement('div');
        title.className='title';
        title.textContent = `${stu.id} ${stu.name}`;
        card.appendChild(title);

        let any = false;

        instances.forEach(inst=>{
          const isTarget = inst.students.includes('ì „ì²´') || inst.students.includes(stu.name);
          if (!isTarget) return;

          const joined = stu.joined || '0000-00-00';
          if (inst.date < joined) return;
          
          const done   = isDone(stu.name, inst.uid);   // âœ… UIDë¡œ ì²´í¬
          const isPast = inst.dateObj < today;
          if (done) return; // ì™„ë£ŒëŠ” ìˆ¨ê¹€

          any = true;
          const chip = document.createElement('div');
          chip.className = 'chip ' + (isPast ? 'missed-past' : 'missed-today');
          chip.dataset.student = stu.name;
          chip.dataset.uid = inst.uid;                 // UID ë³´ê´€
          chip.innerHTML = `
          <span>${escapeHTML(inst.text)}</span>
          <span class="date">${inst.date}</span>
          `;
          
          if (mode === 'edit') {
            chip.style.cursor='pointer';
            chip.addEventListener('click', (e)=>{
              e.stopPropagation();
              setDone(stu.name, inst.uid, true);       // UIDë¡œ ì €ì¥
              chip.remove();
            });
          }
          card.appendChild(chip);
        });

        if (!any){
          // ë¯¸ì™„ë£Œ ì—†ìœ¼ë©´ ë¹„ì›Œë‘ë˜, ìë¦¬ ìœ ì§€ ìœ„í•´ ì•ˆë‚´ 1ì¤„
          const none = document.createElement('div');
          none.style.color='#8a97a6'; none.style.fontSize='13px'; none.style.marginTop='4px';
          none.textContent='ì˜¤ëŠ˜ í•  ì¼ ë';
          card.appendChild(none);
        }

        board.appendChild(card);
      });
    }

    function applyShowEventsBtn(){
      const btn = document.getElementById('eventsBtn');
      if (!btn) return;
      let pref = localStorage.getItem('showEvents');
      if (pref !== 'yes' && pref !== 'no'){ pref='yes'; localStorage.setItem('showEvents', pref); }
      const show = pref !== 'no';
      btn.innerHTML = show ? 'ì¼ì •<br>ìˆ¨ê¹€' : 'ì¼ì •<br>í‘œì‹œ';
      btn.setAttribute('aria-pressed', String(show));
      const strip = document.getElementById('events-strip');
      if (strip) strip.style.display = show ? '' : 'none';
    }
    function toggleShowEvents(){
      const show = localStorage.getItem('showEvents') !== 'no';
      localStorage.setItem('showEvents', show ? 'no' : 'yes');
      applyShowEventsBtn();
      renderBoard();
    }

     // í˜ì´ì§€ê°€ í•˜ë‹¨ì—ì„œ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¡œë“œí•˜ë¯€ë¡œ ì¦‰ì‹œ ì´ˆê¸°í™” ê°€ëŠ¥
    document.addEventListener('DOMContentLoaded', () => {
      applyShowEventsBtn?.();         // í˜ì´ì§€ì— ìˆìœ¼ë©´ ì‹¤í–‰
      renderBoard?.();                // index/teacherì˜ ë³´ë“œ ë Œë”
      window.renderStudentStatus?.(); // teacherì˜ â€˜ì˜¤ëŠ˜ í•  ì¼â€™ ë·°
      window.renderCalendar?.();      // teacherì˜ ë‹¬ë ¥
      window.renderTasks?.();         // studentì˜ ëª©ë¡
      document.getElementById('eventsBtn')?.addEventListener('click', toggleShowEvents);
     document.getElementById('studentLoginForm')?.addEventListener('submit', (e) => {
        e.preventDefault();
        confirmStudentLogin();
      });
    });

    window.addEventListener('storage', (e) => {
      if (e.key === 'tasksV2' || e.key === 'showEvents' || e.key === 'boardMode') renderBoard();
      if (e.key === 'showEvents') applyShowEventsBtn();
       if (e.key === 'boardMode') window.applyBoardModeToButton?.();
    });

    /* ===== ì„¸ì…˜ ìœ í‹¸ ===== */
function clearSession(){
  localStorage.removeItem('currentStudent');
  localStorage.removeItem('sessionExpireAt');
}
function setSession(name){
  localStorage.setItem('currentStudent', name);
  localStorage.setItem('sessionExpireAt', String(Date.now() + 8*60*60*1000)); // 8ì‹œê°„
}
function isSessionValid(){
  const exp = parseInt(localStorage.getItem('sessionExpireAt')||'0', 10);
  return exp && Date.now() < exp;
}
(function checkExpireSilently(){
  if (!isSessionValid()) clearSession(); // ì¡°ìš©íˆ ë§Œë£Œ ì²˜ë¦¬(ì•Œë¦¼ ì—†ìŒ)
})();


// ëª¨ë‹¬ ì—´ê¸°/ë‹«ê¸°/í™•ì¸
let _loginSelected = null;
function openLoginPanel(studentName){
  _loginSelected = studentName;
  const modal  = document.getElementById('studentLoginModal');
  const input  = document.getElementById('studentPwInput');
  if (!modal || !input) return;
  modal.style.display = 'block';
  input.value = '';
  setTimeout(()=>input.focus(), 0);
}
function closeLoginPanel(){
  const modal  = document.getElementById('studentLoginModal');
  if (modal) modal.style.display = 'none';
  _loginSelected = null;
}
function confirmStudentLogin(){
  if (!_loginSelected) return;
  const input = document.getElementById('studentPwInput');
  const pw = input ? input.value.trim() : '';
  const students = loadStudents(); // ê¸°ì¡´ ê³µí†µ í•¨ìˆ˜ ì‚¬ìš©
  const stu = students.find(s => s.name === _loginSelected);
  if (!stu) { alert('í•™ìƒ ì •ë³´ë¥¼ ì°¾ì§€ ëª»í–ˆìŠµë‹ˆë‹¤.'); return; }
  if (stu.password === pw){
    setSession(stu.name);   // ìœ„ìª½ì— ì´ë¯¸ ìˆëŠ” 8ì‹œê°„ ë§Œë£Œ ì„¸ì…˜ ìœ í‹¸ ì‚¬ìš©
    closeLoginPanel();
    // í•„ìš” ì‹œ í•™ìƒ í˜ì´ì§€ë¡œ ì´ë™(or ê·¸ëŒ€ë¡œ ìœ ì§€)
    location.href = 'student.html';
  } else {
    alert('ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
    input?.focus();
  }
}

    // ===== í•™ìƒ ë²„íŠ¼ í† ê¸€: ë¡œê·¸ì¸ ì„ íƒ ëª¨ë“œ =====
    
    const btnStudent = document.getElementById('btn-student-login');
    btnStudent?.addEventListener('click', () => {
      loginPickMode = !loginPickMode;
      
      // ë²„íŠ¼ / ë°”ë”” ìƒíƒœ í† ê¸€
      btnStudent.classList.toggle('active', loginPickMode);
      document.body.classList.toggle('login-pick-mode', loginPickMode);
      
      // ëŒ ë•ŒëŠ” ì„ íƒ/ëª¨ë‹¬ ì •ë¦¬
      if (!loginPickMode) {
        document.querySelectorAll('.grid .card.selected')
          .forEach(el => el.classList.remove('selected'));
        closeLoginPanel?.();
      }
    });

  </script>
  
  <!-- í•™ìƒ ë¡œê·¸ì¸ ëª¨ë‹¬: ë³´ë“œ(#board) ë°–ì— ë‘”ë‹¤ -->
<div id="studentLoginModal" style="display:none; position:fixed; inset:0; z-index:2000;">
  <!-- ë°˜íˆ¬ëª… ë°±ë“œë¡­ -->
  <div style="position:absolute; inset:0; background:rgba(0,0,0,.35);" onclick="closeLoginPanel()"></div>

  <!-- íŒì—… ì¹´ë“œ -->
  <div style="
    position:absolute; left:50%; top:20%;
    transform:translateX(-50%);
    width:min(640px, 92vw);
    background:#fff; border-radius:16px; box-shadow:0 20px 50px rgba(0,0,0,.18);
    padding:20px;
  ">
    <div style="display:flex; align-items:center; justify-content:space-between; margin-bottom:8px;">
      <h3 style="margin:0; font-size:18px;">í•™ìƒ ë¡œê·¸ì¸</h3>
      <button type="button" onclick="closeLoginPanel()" style="all:unset; cursor:pointer; font-size:20px;">Ã—</button>
    </div>

    <form id="studentLoginForm">
      <input id="studentPwInput" type="password" placeholder="ë¹„ë°€ë²ˆí˜¸"
             style="width:100%; height:44px; border:1px solid #dcdfe4; border-radius:12px; padding:0 12px; font:inherit;">

        <div style="display:flex; gap:8px; justify-content:flex-end; margin-top:14px;">
        <button type="submit" class="btn-primary">í™•ì¸</button>
      </div>     

   <div id="loginError" style="display:none; color:#c62828; margin-top:8px; font-size:14px;">
        ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.
      </div>
    </form>
  </div>
</div>
  <!-- Supabase CDN -->
<script src="https://unpkg.com/@supabase/supabase-js@2"></script>
<script>
  const { createClient } = supabase;
  const SUPABASE_URL = "ğŸ‘‰ í”„ë¡œì íŠ¸ Settings > APIì˜ Project URL";
  const SUPABASE_ANON_KEY = "ğŸ‘‰ anon public key";
  window.sb = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);
</script>

</body>
</html>

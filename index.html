<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ì˜¤ëŠ˜ í•  ì¼ - ë©”ì¸</title>

<!-- ê°€ë…ì„± ë†’ì€ ì–‡ì€ ê³„ì—´ -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600&display=swap" rel="stylesheet">

<style>
  /* ===== ì»¬ëŸ¬ë§Œ ì‚´ì§ ë°”ê¾¸ê³  ì‹¶ìœ¼ë©´ ì—¬ê¸° ë³€ìˆ˜ë§Œ ìˆ˜ì • ===== */
  :root{
    /* ë°°ê²½ ê·¸ë¼ë””ì–¸íŠ¸ (ì¢Œì¸¡ ì—°ë…¸ë‘ â†’ ìš°ìƒë‹¨ ì—°ë¯¼íŠ¸) */
    --bg-base: #eef6f1;
    --bg-yellow: #f6e6b9;
    --bg-mint:   #d3f0e2;

    /* ì¹´ë“œ(í¬ë¦¼) & ë¼ì¸/ë‚´ë¶€ê·¸ë¦¼ì */
    --card:       #f7eed7;
    --card-edge:  #eadcb9;  /* ì¹´ë“œ ìƒë‹¨ ì•ˆìª½ ìŒì˜ìƒ‰ */
    --card-line:  #e9e1cc;

    /* í…ìŠ¤íŠ¸/ë³´ì¡° */
    --text:  #1e2a36;
    --muted: #6f7d8c;
    --error: #e11d48;

    /* ì…ë ¥ì°½ */
    --input-bg:   #ffffff;
    --input-line: #e5e7eb;

    /* ë²„íŠ¼(ê·¸ë¦°) */
    --btn:        #2e7d57;
    --btn-shadow: rgba(46,125,87,.28);
  }

  *{ box-sizing:border-box }
  html,body{ height:100% }
  body{
    margin:0;
    font-family:"Noto Sans KR", system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo", sans-serif;
    font-weight:500;
    color:var(--text);
    background:
      radial-gradient(900px 360px at 12% -8%, var(--bg-yellow), transparent 60%),
      radial-gradient(820px 340px at 108% 0%, var(--bg-mint),   transparent 62%),
      linear-gradient(180deg, var(--bg-base), var(--bg-base));
    display:grid; place-items:center;
    padding: 24px 14px;
  }

  /* ë‘¥ê·¼ êµ¬ë¦„(ì‚¬ì§„ ìœ„ì¹˜ì™€ í¬ê¸° ë¹„ìŠ·í•˜ê²Œ) */
  .cloud{ position:fixed; inset:0; pointer-events:none; z-index:-1;
    background:
      radial-gradient(180px 70px  at 15% 30%, #fff 60%, transparent 61%),
      radial-gradient(140px 60px  at 23% 28%, #fff 60%, transparent 61%),
      radial-gradient(210px 85px  at 78% 30%, #fff 60%, transparent 61%),
      radial-gradient(160px 70px  at 88% 36%, #fff 60%, transparent 61%);
    opacity:.86;
  }

  .wrap{ width:100%; max-width: 820px; }

  /* ìš°ìƒë‹¨ 'êµì‚¬ìš©' ì¹© */
  #teacher-link{
    position:fixed; top:14px; right:14px;
    padding:10px 12px; font-size:12px; color:var(--text);
    background:#fffffff0; border:1px solid var(--card-line); border-radius:999px;
    box-shadow:0 6px 14px rgba(0,0,0,.06); cursor:pointer; user-select:none;
  }

  /* ë¡œê³ : ë§¨ ìœ„ ì •ì¤‘ì•™ */
  .logo-wrap{ text-align:center; margin-bottom: 10px; }
  .logo-box{
    display:inline-flex; align-items:center; justify-content:center;
    width:72px; height:72px; border-radius:20px;
    background:#fff; border:1px solid #fff;
    box-shadow:0 10px 24px rgba(0,0,0,.06);
  }
  #logo{ width:48px; height:48px; object-fit:contain; display:block; }

  /* ì¹´ë“œ: ì œëª© í¬í•¨(ì‚¬ì§„ì²˜ëŸ¼ ì œëª© ìœ„ì— ì¹´ë“œê°€ ë‹¿ì•„ìˆìŒ) */
  .frame{ display:flex; justify-content:center; }
  .card{
    width:min(92vw, 640px);
    background:var(--card);
    border:1px solid var(--card-line);
    border-radius:26px;
    padding: 22px 22px 24px;
    box-shadow:
      0 18px 42px rgba(0,0,0,.10),
      inset 0 10px 0 var(--card-edge);
  }

  /* ì œëª©: ì¤‘ì•™, ì‚´ì§ êµµê²Œ(ì‚¬ì§„ ëŒ€ë¹„ ê³¼í•˜ì§€ ì•Šê²Œ) */
  .title{
    margin: 6px 0 8px;
    text-align:center;
    font-weight:600;
    font-size: 28px;
    letter-spacing:-.2px;
  }

  label{
    display:block; font-size:14px; color:var(--muted);
    margin: 10px 2px 8px;
  }
  .field{ position:relative; margin-bottom:14px; }

  /* ì…ë ¥ì°½: í° ë¼ìš´ë“œ, ì•ˆìª½ ì‚´ì§ ìŒì˜ ëŠë‚Œ */
  select, input[type="password"]{
    width:100%;
    font:inherit; font-weight:500; color:var(--text);
    background:var(--input-bg);
    border:2px solid var(--input-line);
    border-radius: 16px;
    padding: 14px 16px;
    outline:none;
    box-shadow: 0 2px 0 rgba(0,0,0,.02) inset;
    transition: border-color .12s ease, box-shadow .12s ease, background .12s ease;
    appearance:none;
  }
  select:focus, input:focus{
    border-color:#33c5a1;
    box-shadow: 0 0 0 4px rgba(51,197,161,.18);
    background:#fcfffd;
  }

  /* 'ë³´ê¸°' ë²„íŠ¼: ì…ë ¥ì°½ ì•ˆ, ì„¸ë¡œ ì¤‘ì•™ ê³ ì •(ë– ë‹¤ë‹ˆì§€ ì•ŠìŒ) */
  .pw-toggle{
    position:absolute; right:10px; top:0; bottom:0; margin:auto 0;
    display:flex; align-items:center; padding:0 10px;
    height:calc(100% - 8px);
    background:#fff; border:1px solid var(--input-line);
    border-radius:10px; font:inherit; color:#4b5a6a; cursor:pointer;
  }

  #error-msg{ min-height:18px; text-align:center; font-size:13px; color:var(--error); margin:6px 0 2px; }
  .hint{ text-align:center; font-size:12px; color:var(--muted); margin-top:6px; }

  /* ë¡œê·¸ì¸ ë²„íŠ¼: í†µí†µí•œ ë¼ìš´ë“œ + ê·¸ë¦° */
  .btn{
    width:100%; border:0; border-radius:20px;
    padding:16px 18px; font:inherit; font-size:18px; color:#fff;
    background:var(--btn); box-shadow:0 12px 28px var(--btn-shadow);
    cursor:pointer;
  }

  .footer{ margin-top:16px; text-align:center; font-size:12px; color:var(--muted); }
</style>
</head>
<body>
<div class="cloud" aria-hidden="true"></div>

<div id="teacher-link" onclick="location.href='teacher.html';">êµì‚¬ìš©</div>

<div class="wrap">
  <!-- ë¡œê³ : ë§¨ ìœ„ ì •ì¤‘ì•™ -->
  <div class="logo-wrap">
    <div class="logo-box">
      <img id="logo" src="logo.png" alt="ì˜¤ëŠ˜ í•  ì¼ ë¡œê³ " />
    </div>
  </div>

  <section class="frame">
    <!-- ì¹´ë“œê°€ ì œëª©ê¹Œì§€ í¬í•¨ -->
    <main class="card" id="login-card">
      <h1 class="title">í•™ìƒ ë¡œê·¸ì¸ ğŸ™‚</h1>

      <form id="login-form" novalidate>
        <div class="field">
          <label for="student-select-login">ì´ë¦„ ì„ íƒ</label>
          <select id="student-select-login" required>
            <option value="">-- ì„ íƒí•˜ì„¸ìš” --</option>
          </select>
        </div>

        <div class="field">
          <label for="password">ë¹„ë°€ë²ˆí˜¸</label>
          <input type="password" id="password" inputmode="numeric" pattern="\\d{4}" placeholder="ë¹„ë°€ë²ˆí˜¸ 4ìë¦¬" maxlength="4" />
          <button type="button" class="pw-toggle" id="togglePw">ë³´ê¸°</button>
        </div>

        <div id="error-msg"></div>
        <button id="login-btn" type="submit" class="btn">ë¡œê·¸ì¸</button>
        <div class="hint">Enterí‚¤ë¡œë„ ë¡œê·¸ì¸í•  ìˆ˜ ìˆì–´ìš”.</div>
      </form>
    </main>
  </section>

  <div class="footer">Â© ì˜¤ëŠ˜ í•  ì¼ onhi</div>
</div>

<script>
  // í•™ìƒ ëª©ë¡ ë¡œë“œ
  function loadStudents(){
    const raw = localStorage.getItem("students");
    const students = raw ? JSON.parse(raw) : [];
    students.sort((a,b)=>Number(a.id)-Number(b.id));
    const sel=document.getElementById("student-select-login");
    sel.innerHTML='<option value="">-- ì„ íƒí•˜ì„¸ìš” --</option>';
    students.forEach(stu=>{
      const opt=document.createElement("option");
      opt.value=stu.name;
      opt.textContent=`${Number(stu.id)} ${stu.name}`;
      sel.appendChild(opt);
    });
  }

  // ë³´ê¸° í† ê¸€
  const pw = document.getElementById("password");
  const toggle = document.getElementById("togglePw");
  toggle.addEventListener("click", ()=>{
    const hidden = pw.type==="password";
    pw.type = hidden ? "text" : "password";
    toggle.textContent = hidden ? "ìˆ¨ê¸°ê¸°" : "ë³´ê¸°";
    pw.focus();
  });
  pw.addEventListener("input", (e)=>{
    e.target.value = e.target.value.replace(/[^0-9]/g,"").slice(0,4);
  });

  function showError(t){ document.getElementById("error-msg").textContent=t||""; }
  function setBusy(b){ const btn=document.getElementById("login-btn"); btn.disabled=b; btn.textContent=b?"í™•ì¸ ì¤‘â€¦":"ë¡œê·¸ì¸"; }

  function login(){
    const name=document.getElementById("student-select-login").value;
    const pass=pw.value.trim();
    if(!name){ showError("ì´ë¦„ì„ ì„ íƒí•˜ì„¸ìš”."); return; }
    if(pass.length!==4){ showError("ë¹„ë°€ë²ˆí˜¸ 4ìë¦¬ë¥¼ ì…ë ¥í•˜ì„¸ìš”."); return; }

    const raw=localStorage.getItem("students");
    const students=raw?JSON.parse(raw):[];
    const ok=students.find(s=>s.name===name && s.password===pass);
    if(ok){
      showError(""); setBusy(true);
      localStorage.setItem("currentStudent", ok.name);
      setTimeout(()=>location.href="student.html", 150);
    }else showError("ì´ë¦„ ë˜ëŠ” ë¹„ë°€ë²ˆí˜¸ê°€ í‹€ë ¸ìŠµë‹ˆë‹¤.");
  }

  document.getElementById("login-form").addEventListener("submit",(e)=>{e.preventDefault(); login();});
  window.addEventListener("load", loadStudents);
</script>
</body>
</html>
